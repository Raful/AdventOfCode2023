using System;
using System.Collections;
using System.Collections.Generic;
using System.Threading.Tasks;
using UnityEngine;
using static Day10;
using UnityEngine.Windows;
using System.Linq;
using System.Text;

public class Day12 : MonoBehaviour
{
    string _input = "??#??#??##.#???? 4,2,2,1,2\r\n.#?#.???#?.?? 3,3,1\r\n#???.#???#?.?.??.? 2,1,5,1,1\r\n??#??#???????? 1,5,1\r\n?..##????#???#? 1,8,1\r\n?#?##??#?#?#???? 12,1\r\n?#???##???.??????? 7,2,1\r\n?###??????.?#?.# 7,2,1,1\r\n?.??.???.?? 2,2\r\n??##?##?.###???##?#? 1,2,2,8,2\r\n#.#?.??.??#???#? 1,1,1,3,3\r\n.#???#.?#????# 5,1,2,1\r\n???#???..?????#?#. 5,8\r\n##?#??.????#?????? 6,5,1,2\r\n??.?#??##????# 1,8,1\r\n??.????.????.?#..? 1,1\r\n.??????...?##?.?. 2,2,4\r\n??.???#???#?#?#???? 1,1,7,1,1,1\r\n#?.?##.??. 1,2,1\r\n#?????#??#.??.. 1,1,2,1,1\r\n??#???.??#? 6,1,1\r\n#?..?.????.?? 1,1,3,1\r\n??#??.?#?.#??#.?.#?. 5,2,1,1,2\r\n.????#??.#??????. 7,7\r\n??#?.?#??. 4,2,1\r\n#?.?.#??.?????# 2,1,1,1,1\r\n???????????. 2,2\r\n.??##????? 3,1\r\n#.?.??.????#?##? 1,2,8\r\n??#.?.#?##????. 2,7\r\n?#?.??????.????#??? 2,1,1,1,8\r\n?????#??.?#?.#?. 1,5,1,1\r\n??#?#?????.???. 3,3,1\r\n.?.???.??## 1,1,4\r\n.##?..##?.???# 2,3,3\r\n.##??????.# 2,4,1\r\n?#??..#????? 2,1,1\r\n?###?.????? 4,1\r\n??#.#???#??#?#?## 1,1,1,10\r\n??#???.??..##...##?? 1,3,1,2,3\r\n##?????????.?#?.???. 6,3,2,1,1\r\n##?.??.???# 3,1,1\r\n.??????#?#?.???##?? 10,5\r\n??????..?#? 1,1,3\r\n#?##?#...?##?#?#??? 6,3,5\r\n?.?.??????#?#? 1,7,1\r\n????.###??????#??#?? 2,13\r\n???.?????.??. 2,1\r\n?#?????.???#???#??? 3,1,1,1,1,2\r\n?.?.?????#?#?#? 1,8\r\n.#??#?#?.????????.? 7,2,1,1,1\r\n?...??.?##?????#??? 3,2\r\n??.?###?#??.?????? 1,4,1,1,1,2\r\n???.????????????###? 1,2,10\r\n???.???????#???? 3,3,1,3\r\n?#??#?#????#.?? 1,7,1,2\r\n??#????#?#?#?#??.##? 1,2,11,2\r\n..??.????#? 1,2,1\r\n.?#?.???.????? 1,3,1\r\n?#?#???#?#???.??#?? 12,3\r\n??????##???###?#???? 1,1,3,11\r\n?#?.??.???????? 2,1,1,2\r\n??.?#??????#?? 1,4,2\r\n.??.?#??#?. 1,6\r\n??.????.???? 1,1,2,2\r\n#.#????#??? 1,2,3\r\n..??#?###????.??.? 11,1\r\n???#?.??#???. 1,2,2,1\r\n?#?##???#..#???? 5,3,1,1\r\n.???.#??#?? 1,1,2\r\n????#?.?????????.. 2,8\r\n.?#??##.??? 6,1\r\n?????#???. 1,5,1\r\n.#?#?#??????# 3,5,1\r\n?.???#???#????????? 4,2,5\r\n#??????#?#.?.#? 1,1,3,1,1\r\n#??????###??.?????? 12,1,2\r\n???#??#?.#?###.??. 1,2,1,5,2\r\n.???.?#???##?#?????? 1,1,6,1,1\r\n??..?.???#??. 1,1\r\n???.?#?##?.???#??#?? 1,4,7,1\r\n????#??#??#..??? 9,1,2\r\n.?.#??.?????#??? 1,2,8\r\n#??#?..?###?#?????# 1,1,9,1\r\n???..?.?#?. 1,1,2\r\n????##?????#?.??? 6,3,1\r\n..#??#?????.???? 7,3\r\n?.??#?#??##?.#... 8,1\r\n?##??.????#.?????? 4,1,1,1,1,1\r\n.?????#???#?#?.?. 1,3,4,1\r\n#?##??#?#.#...??? 7,1,1,2\r\n??.????.?????###? 1,2,7\r\n?.##????#????.??. 7,1\r\n??????#???#????? 1,6,1,1\r\n?#.??#??#?#?? 1,1,1,5\r\n?#????#.#??? 1,4,2,1\r\n#??.?.?????. 3,2,1\r\n????????#?.? 4,3\r\n#.??#?#????.?#????? 1,3,1,3,1,4\r\n???#???#?.#?.#. 2,2,1,1,1\r\n?.#????..##?????.? 4,7\r\n??#???????? 3,2\r\n??..?...?##?? 1,4\r\n#??#?.??#?? 5,1\r\n?#??#???????????##?? 3,1,1,2,1,2\r\n?????????.#.. 3,2,1\r\n.??????##??? 1,7\r\n?.??.??.#??. 1,1,1\r\n???#????#??????????? 1,3,1,7,1\r\n?#?.#??.????# 2,2,2,2\r\n???#?#???#???. 8,1\r\n???###.?#?#??#? 1,3,3,2\r\n?.#?????#??? 4,1,1\r\n????.?#??#??#?? 1,8\r\n.??..???##????#?? 1,6,1,1\r\n?##?##??#??#??#???#. 5,8,3\r\n?..?#?.????? 1,3,1,2\r\n?##.?#????? 3,4\r\n??#??#????## 5,1,2\r\n#..?#??..#? 1,3,1\r\n?#?#?.???###.# 1,1,5,1\r\n?????#?????.. 5,1,1\r\n?#??#.?.?? 4,1\r\n????#??#??.?#??? 5,2,4\r\n#??#?##??.????.???? 8,1,1,1\r\n?#??#??#..??##..??.? 2,5,1,2,1,1\r\n??##????####????? 6,9\r\n.??#??###??????#???# 1,8,1,1,1,1\r\n??##?..??#???.?? 3,4\r\n????#????????? 9,3\r\n?##??.???..?? 3,1,2,1\r\n#?.???#??#????#.?? 2,9,1,1\r\n#.???#?#?#??????.??? 1,1,8,1,1,1\r\n#.?.??#####?#?????? 1,12\r\n.??###?##????.???#?. 11,3\r\n?#????.?????#?.?? 5,2,1,2\r\n??##?#????.??#.????? 7,1,1,1,1,1\r\n.??????.???. 2,2,1\r\n??#?...?##??? 1,4\r\n..?????.???#?#? 3,6\r\n?.???????#?#?. 1,7\r\n??#??.??.. 3,1,1\r\n?.#?.????#?#??.??? 2,1,4,1,1,1\r\n#?##??#..? 1,5\r\n?????????.#?? 5,1,1,2\r\n.??.?????.?????##? 5,7\r\n?.#????#??? 1,5\r\n????#???.????? 3,2,1,1\r\n.??.?##???#? 2,3,3\r\n.???##??.??.##???.?? 7,1,5\r\n????.#???#? 1,1,3\r\n??????##?### 1,6\r\n?????#?##????? 6,1\r\n?#??#.??.??. 4,2\r\n?????.?????#???.#? 4,9,1\r\n??.???????..?.. 1,1\r\n?.??????##??#????. 1,5,2,2\r\n.??#?????? 1,3\r\n??#?.???.?#?##??#?? 1,8\r\n?.?#?#?##?#?#??. 1,9,2\r\n?????.?.???#?#?##?? 3,1,9\r\n.??.?#?.#?##?. 1,1,5\r\n#??????##..#???.#??? 1,6,2,1,1\r\n#?.?.???#. 2,1,1\r\n???#?#??????. 2,1,1,1\r\n##??.?##.?.????#? 2,3,1,3,2\r\n???.#?.?#????? 1,2,4\r\n#???.??#???. 1,1,4\r\n?..????????#???.?. 1,1,1,5,2,1\r\n????????.??..?.? 4,1\r\n?.?????.... 1,1\r\n.?#????..###?????#? 2,1,1,3,1,1\r\n..#.??#??????#?#?? 1,12\r\n.??#??##??.????#. 7,5\r\n?##??#?#??.?#???. 9,2,1\r\n?#?#?#???.#?#.#? 8,1,1,2\r\n?.??.???.#?? 1,1,1,1\r\n??????.?.#?? 5,2\r\n???#????.????????? 1,1,1,1,8\r\n??????##??#?????? 14,1\r\n???.#.?.???????####? 1,2,4\r\n.#.??#??#???.#??#??. 1,6,2,1,1\r\n.????#??????### 5,1,5\r\n.??..#?..? 2,2\r\n???#?????#..??# 6,2,3\r\n??????#?##.?#??#.??. 7,5\r\n????????##??.#? 2,2,3,1,1\r\n?..###?#??..??..#??? 5,1\r\n#????.??##?##?? 1,1,1,7\r\n#?????#???????. 1,1,4,2\r\n??????.??????#. 1,1,1,3\r\n???#..???????# 2,1,8\r\n#.??#??..???# 1,3,1,4\r\n????##?????##??.?#? 1,4,1,1,4,2\r\n?.???#?????.??? 1,1,1,1,2\r\n.???????#? 1,1,2\r\n.??#?.???.# 3,1\r\n...?#??????#.#?? 1,1,1,2,2\r\n??#?.????.??## 3,2,1,4\r\n??#?###??????. 7,1,1\r\n??.?????#?????.?#?.. 1,5,3,3\r\n..??##?????.#??? 4,2,1\r\n??#.????#??#.??? 2,1,2,1,1\r\n???#??.???.??#? 1,3,1,1,4\r\n?#???###????.??? 9,1,1,1\r\n?...?.??#.????? 1,2,2\r\n?#????##.?#???? 2,5,1,2\r\n?#??#??#??.?.??.?##. 2,6,1,2,2\r\n..??#?.##???? 1,2,2,1\r\n##?..#?#?..#??? 2,3,2,1\r\n??.??.??#????? 1,3,3\r\n.??#????#?? 2,1,2\r\n.?##?.#?##?..#? 4,4,1\r\n.??.?????? 1,1,1\r\n???..???##????. 1,2,2,1\r\n??#??????#??? 2,7\r\n???#.??????#???????# 1,1,1,5,3,1\r\n???.?#???#?#??# 1,1,1,2,4\r\n?..?#??.??##.???? 1,3,1,2,3\r\n##??????#?.?.?.?? 2,1,3,1,1\r\n.?..???#???#??#### 1,13\r\n?#??#..?.#?. 4,2\r\n??#???.??? 3,2,2\r\n..??##?#??..??? 6,3\r\n#.????????.??###?#?. 1,1,1,1,5,1\r\n???.?..?## 1,1,2\r\n?.?.???????.???????? 1,1\r\n???.??????..?. 1,2,2,1\r\n?.#????????###.?#. 1,3,1,2,3,1\r\n??#?????##??#?? 11,1\r\n??????#???? 1,2\r\n.##?.?????????#??? 3,4,2,4\r\n?#???.#.??? 3,1,1\r\n.???#.???.#. 1,1,1,1\r\n????.??#??#?#??.?? 1,2,6,1,1\r\n#?#?.#?????????#?# 1,2,1,2,5,1\r\n??.#??????#?. 1,1,2,2\r\n#?.?.##...#??#?# 2,1,2,6\r\n???#??..?? 6,1\r\n?????????#?#???.???? 1,1,11,2\r\n???#?#?#????..? 1,1,3,2,1\r\n??#???#??????##?#.?? 17,1\r\n????..???? 1,3\r\n??????#???##???#? 2,1,7\r\n####???.?? 5,1,1\r\n?.???????#?#?##?##?? 1,1,1,7,2,1\r\n???????.#?? 4,1,1\r\n??.##???.#???#??#?? 1,2,1,1,6\r\n.?#????????.?#?..?. 4,4,2,1\r\n??#?.??#??? 4,5\r\n#??????##??. 1,1,3\r\n#?????#.??#?.#?# 2,3,1,3\r\n???????#?#?????????. 14,2\r\n.??.#?#???##??#.. 1,9\r\n?????.?????#?#??? 2,1,6\r\n?????.?..??#??.#??? 1,1,1,5,1,1\r\n.?.#??.?.??.? 3,1\r\n?.##??###?????#???? 9,1,1,1\r\n?#.#??????#..??#?? 2,1,4,4\r\n?.?.??#??.??.??#?#? 1,5,5\r\n..#??.???.?###?. 2,1,3\r\n?????????? 3,1\r\n?#????#??????#?? 2,4,7\r\n.??.???????#???. 1,8\r\n.?????#???????#??? 1,11\r\n?.??.??????#???? 1,1,3,2,1\r\n.#.?##?#??#??# 1,5,2,2\r\n??????##?#??#??.? 1,8,1,1\r\n?#####?.##?#????.?? 7,4,3,1\r\n?#????#??# 4,2,1\r\n???#????.?. 1,5,1\r\n??#???#???.? 2,2,1,1\r\n.#?#?#?#????..?? 1,1,1,1,3\r\n??.????##??##?.?. 1,5,3,1\r\n?#??????.???? 2,1,1,4\r\n??.?.??????##???## 2,1,1,8\r\n.???.####??????#??. 1,4,6\r\n..????#.?????????? 2,1,1,4,1\r\n.?##???????##????. 3,7\r\n???##??#?????.????.. 9,1,4\r\n..?.??.??????.#?.?# 1,2,1,2,2,1\r\n?#????????##????#??? 1,2,6,1,1,1\r\n????####???????? 2,7,3\r\n.?.????..?.?????. 4,1\r\n???#???#?#???#?#? 2,11\r\n??.#?????.?.# 1,5,1,1\r\n?.?????##...??? 1,6,2\r\n???###???#????? 6,1,1,1\r\n??#????????.?.??.? 4,1,1,1,1,1\r\n?.???###???##??# 1,2,3,2,1\r\n?..?????#??.???.?#? 1,6,1,1,1\r\n??.?.??#???? 1,5\r\n.?.#????#??????#?# 1,7,1,1,1,1\r\n.???????#??#?? 1,7\r\n???.?????#.? 1,6\r\n?#??#?.??????? 1,2,1,4\r\n????#?#?.#????????? 3,3,1,6\r\n??##?.???? 2,2\r\n?#??.????#?? 2,1,5\r\n#?.??.?#?.??#?.??# 1,1,2,2,1,1\r\n?#?#??.??#?????? 5,3,1\r\n#?#?#????.??...?? 1,4,1,1\r\n????.?#?#?#. 2,4,1\r\n#?????#??????.?? 10,2,1\r\n.?.????#.?????? 1,4,1,2\r\n???#?#?##????#??? 9,3\r\n#??.#?????.???? 2,1,1,1,2\r\n??.????????#??? 2,1,1,1,3\r\n?#?.#???#???#??#?##. 2,15\r\n??#???#??????#? 8,3\r\n.??....???? 2,1,1\r\n?.???..#??.???????. 2,2,5\r\n.???????#?. 3,1\r\n????##?####??????#. 1,13,1\r\n?..?###??.???. 3,2\r\n?##?#?#?#?????.? 4,8\r\n##??.#???????# 4,1,1,2\r\n.???.????## 1,5\r\n????#????#????#???#? 2,7,6\r\n??#????#?#.????????? 1,1,1,1,1,8\r\n??.??.??##????????# 1,1,4,1,1,2\r\n??.????.??##?# 1,4,5\r\n?#?#?.?###??.?.. 4,6,1\r\n??.##?.?#? 2,2\r\n??#??.???..?? 3,2,1\r\n.#.?????.??. 1,1,1\r\n???????#????.?##? 6,2,1,4\r\n.????#?????????###? 6,1,2,4\r\n.??#????.????.. 1,4,3\r\n#.#?????#?#????.??.? 1,2,6,2,1,1\r\n?.???#.?#??????.?. 1,4,2,5\r\n???.?##.#?##. 2,2,1,2\r\n?.?####??#????#? 7,3\r\n?##.?#???#?#.?.??#. 3,1,4,1,1\r\n?????.????#???. 2,1,1\r\n...?#?#?#?.#?#?? 6,5\r\n?#?..??#?#? 2,5\r\n?#?..??????????# 2,1,1,4\r\n#.????????.???#?#. 1,1,5,2,1,1\r\n#???????#?. 2,4\r\n??????.###?.??????#? 1,1,3,5\r\n??????.##?????#? 3,8\r\n?#??.##???? 3,6\r\n???.?????#?.?#??? 5,1\r\n???#???#???.? 1,7,1\r\n?#..?.?.?# 1,1,1\r\n?.???#???#?? 4,4\r\n???????###???.#. 13,1\r\n??#???.#?#?#.??? 3,5,3\r\n##..##?#???? 2,4,1\r\n??..??.?#???? 1,2,2,1\r\n????????#???#??#?# 2,1,3,8\r\n??##?.?????#??#?..? 1,3,8\r\n###??#??#?#???#??#? 3,6,3,2\r\n.??.??.??##??? 2,1,3,1\r\n???#???#?#.#??#.? 1,5,1,1,1\r\n???#??##.????. 1,6,1\r\n#.??##??#?#??.???? 1,1,9,1,1\r\n.??.?##??#?. 4,1\r\n?.??#????????.#??? 3,5,2\r\n.??????#.? 1,3\r\n????#?#???????#?#. 1,2,1,1,7\r\n?.???#.#??#??#? 3,2,5\r\n???.#?#??.??#???.?. 4,3\r\n?.?????##?#?? 4,1\r\n??#???#???##??????? 2,14\r\n???????#?.. 3,2\r\n#???.?##?##???##... 1,10\r\n??????#??.??.. 6,2\r\n..#?.????###.#??# 2,5,4\r\n???.??.#???#?.# 2,1,1,3,1\r\n????.??#????#?.?? 2,2,1,3,1\r\n??##..?.???? 4,1\r\n.???#?#???#.?.#?#?## 9,6\r\n?....????####? 1,7\r\n?#??#?#???? 1,4,3\r\n#??#???..# 1,4,1\r\n???#????#??. 2,4,1,1\r\n???????.?..? 1,1,1,1\r\n?#??#?????????? 2,6,1,2\r\n?.#???.????#????#?? 1,7\r\n?????.#??#???#? 2,1,4,3\r\n.?###?????????. 8,4\r\n?.#?????????##??#? 1,1,1,10\r\n??#??????.. 1,3\r\n??#??#...?#.?#?????. 5,1,7\r\n?#?..??????.##.??? 3,6,2,1\r\n#.#.??.????#??????? 1,1,1,5,1,3\r\n#.??#?????#?#??.???? 1,12,2,1\r\n?##?..##??#???? 2,2,3,1\r\n.?#???.????#?? 1,2,3\r\n#?.???????#???# 1,1,1,6,1\r\n?.??.??#..??.#?## 2,2,1,1,2\r\n.???.????? 1,1,1\r\n?#???????? 4,1,1\r\n?????..????#??#? 1,6,1\r\n??#????#????????? 8,2\r\n?.???.?.???## 1,1,1,3\r\n?..?.?..?. 1,1\r\n?..???.?#?#?#?#? 1,8\r\n???###???#.?.#.?#??? 10,1,1,4\r\n#.?#??#?.??.? 1,6,1,1\r\n#??????????#?????? 8,2,2\r\n??##?.#??. 3,2\r\n.#?#??#??????#. 1,1,3,1,1\r\n???.?..??.??#?? 2,1,1,5\r\n.????#????#????..?? 1,8,1,1\r\n?##?##.??## 3,2,2\r\n??????.??.# 4,1\r\n??#.???#??.?#????#? 2,1,1,1,2,2\r\n.???#??###???#?# 4,3,5\r\n??##?#?#?#?..#??? 9,3\r\n?#?#???.?# 1,3,2\r\n????#?#??.? 1,5,1\r\n?.??????.? 1,3,1\r\n?.?.??.?#?..??#??? 1,1,3,1,4\r\n.??##???#?##??. 3,1,3\r\n??##?.??.?????. 4,1,1\r\n???##??#??#??..???? 1,2,5,1,1\r\n??????#????..? 1,2,5,1\r\n??#?.?.??# 1,1,1\r\n.????????.?? 1,1,1,1\r\n.?#?.?##?#?? 3,5,1\r\n???.???#?.. 2,2\r\n.???#??.??? 1,2,2\r\n??#??????????? 1,5,1\r\n??.?.?##..#? 1,1,3,1\r\n??????#??# 2,1,2\r\n#?.???##??.?? 2,1,3,2\r\n?..?#?.?????## 2,4\r\n#?##?.##??#?????#?? 5,8,3\r\n????#?..???? 2,4\r\n?.????#?#????? 2,5\r\n???#?????.????? 6,1,1,1\r\n#???#?????##?????? 2,5,4,3\r\n#?#?#.?#??? 5,2,1\r\n.?#??.?????#?###. 2,1,2,5\r\n??##???##????#??? 2,4,4\r\n???.#??????.???? 1,1,7,1,1\r\n??.???#???#?????? 1,2,1,1,7\r\n##???#???#???. 2,1,2,5\r\n??.#?...#?? 1,2\r\n?#????#.?#???#?#?#? 2,1,1,11\r\n?###???????# 6,3\r\n.??##?.??.????????# 4,1,3,4\r\n.?????#??? 1,3\r\n#????##?#??????? 2,2,6\r\n?#?.?????????.# 2,1,5,1,1\r\n??.?????#?? 1,1,3\r\n.?#####?.#??? 7,2\r\n..???##?..??? 5,1\r\n???##???#?? 2,4\r\n#.?#..???##????? 1,1,10\r\n?????????????? 7,2\r\n?.???.???# 1,2,3\r\n??#??????#?.??? 4,2\r\n?#??????..#?.?? 6,2,2\r\n??.?#?..#.?????# 1,2,1,2\r\n?.??#???.??#??? 4,2\r\n?#??.????.?????. 2,1,1,5\r\n..??.#?#.??#.???#? 1,1,1,1,1,3\r\n?#??#??.?. 3,1,1\r\n???????#??#??##?.? 11,2,1\r\n?#??##.#??.????#???? 6,1,1,8\r\n.?##?#?##????? 11,1\r\n??#?#???#????.?..??? 11,1,1,1\r\n???????..##.?##? 4,2,4\r\n??.#?#.??. 2,3,1\r\n????##.#??? 2,3,3\r\n?#..?.?#?#??.????# 2,6,5\r\n????#?????. 5,1\r\n???.?.????#. 3,5\r\n?.??#?###? 1,6\r\n?#?..???????? 2,6,1\r\n????????.???#?? 1,3,1,1\r\n.?###???????#???? 8,5\r\n????#???????? 8,2\r\n..???#??.#.# 1,2,1,1\r\n#???#?#.?? 1,5\r\n???#?.??#? 2,2,1\r\n?#??#?????#?#?. 2,2,1,1,1\r\n?#.?.#????.?#?????? 2,3,1,5,1\r\n.????#?.#?.?#?.?.?.? 5,1,1,1,1,1\r\n.?????###??##???.? 12,1\r\n?.???#.?#??##.?? 1,1,2,3,1\r\n?##?.????????##. 4,5,3\r\n#??????????. 1,1,2,2\r\n??#?????##?#. 1,7\r\n#????.??#?##???? 1,2,7,1\r\n???#??.??.## 6,1,2\r\n#???#..???? 5,1\r\n?..#??##.?.#??. 5,3\r\n?#?????#.#???? 2,4,3,1\r\n??#??#????? 4,2,1\r\n?.??##??.#??? 3,1\r\n???.#??#???????#?.? 3,4,4,1\r\n?#?#?#????.?.?#???? 9,3\r\n??#??##????#??????? 12,1\r\n??????.???#?? 3,4\r\n??#???#???##..#?. 11,1\r\n#?????.?.. 1,1,1\r\n.?????##?. 2,2\r\n???..??#?.? 1,3,1\r\n#??#???##?? 2,7\r\n???????#??.?? 1,3,2\r\n#..?#???.#?.??? 1,2,2,2,2\r\n?#???#.??.?.? 6,1,1,1\r\n??#?...??#??? 2,5\r\n?????#.##?#????? 4,1,2,5\r\n???.?.?.???.????? 2,1,2\r\n#.?..??????.???? 1,1,5,1,1\r\n??.???.???#??? 1,2,2,1\r\n?#??????????. 1,1,2,1\r\n.???##?.?.#.?##???. 2,2,1,4\r\n??.#????###??.#?.. 1,10,2\r\n.#?#?.?????? 4,2\r\n?.?#?????? 2,3\r\n..?#??????????..#?? 11,1\r\n.???#???##???????##? 1,3,3,1,3\r\n????#????? 1,1,1\r\n?#???????##??? 11,1\r\n???????#????#. 5,3\r\n?##?##???..#??.??? 5,1,1,1,3\r\n??..?.?##?#??????# 1,12\r\n.????????????#???? 4,1,1,3,2\r\n.????#???????.? 1,7\r\n?????#????#?????? 6,3,1\r\n?.?#??...?.???##??.. 3,3\r\n#??????#?????.? 4,1,2,1\r\n??#..??#??????? 1,1,3,1,1\r\n#??#?.??.?.??..#? 5,1,2,1\r\n?#?#????????????#.?? 4,7,3\r\n?#???.??#????#? 1,1,3,1,1\r\n??#?#???#?#.#?.#? 1,2,4,1,1\r\n???#???.#? 4,1\r\n?.?#.??##.???# 1,3,1,1\r\n#???????.?.????? 1,1,1,2,1\r\n?#??##?..???#???#??? 1,2,11\r\n?????.?????#???????? 1,1,5,3\r\n#?.???#???? 1,5\r\n???##???#.#. 9,1\r\n#.???????#? 1,5,2\r\n##?.??##?.?? 3,3,2\r\n???????????#????? 12,1\r\n???.###??????##?? 2,6,3\r\n??#.????.?? 1,4\r\n?.??????#?????# 1,2,5,1\r\n?????#???.?? 4,1\r\n???????#?#????.? 1,1,1,4,1\r\n?#.#.???????#???.??? 1,1,1,8,2\r\n???.?##??? 1,4,1\r\n???#????.?#.#?????# 1,6,1,1,1,2\r\n???.???#????#?????.? 2,1,7,3\r\n??##?????#? 5,1,1\r\n.?.##????#?. 1,2,2\r\n????.?#?.## 1,2\r\n??????.#??##??##?.# 1,3,1,2,4,1\r\n?#??#?????????.?#??? 8,2,1,2,2\r\n???#?????#?. 2,3\r\n???#??????# 6,1,1\r\n?#.#.?.??.?? 1,1,1,1\r\n???#??.?.???#???##? 3,9\r\n?#????###.?#? 1,1,3,2\r\n.?#?.???##. 1,2,2\r\n????#?.?#.???? 3,2,2\r\n???#????#???#???? 3,2,2,3,1\r\n??#?????????##???? 1,1,9\r\n#.?..#..?#?.? 1,1,1,3\r\n???#??.??#?#???. 4,6\r\n?.?.???#???##??#. 1,5,4,1\r\n#????#.??#??#?#?? 6,5,2\r\n??#.??#???#???#???? 1,10,1\r\n?#?#.##?.#?? 4,2,2\r\n????#??????##???? 1,1,5,2\r\n..##??##????? 2,5,1\r\n..?????????? 1,6\r\n?##?#?.????. 4,1\r\n???????#.???? 3,1,3\r\n#.#??????#????#. 1,2,1,1,3\r\n???#???.?????? 5,2\r\n..???#?#?.???? 1,1,1,4\r\n??.#??.?#? 1,1,1\r\n???#?.??.??????#???. 2,7\r\n???##????.??? 1,3,1,1\r\n?#..?#??.?? 1,2,1\r\n#.?#????.? 1,6\r\n?..?#??.###????# 1,3,3,2,1\r\n.#..??????#???.?? 1,9,1\r\n???????.?#..??????? 5,1,2,2,1\r\n??#.#??##.. 1,1,5\r\n#???????#????#?.?? 1,13,1\r\n?????.??#? 1,1,3\r\n#.?#???.?.#.#?#??? 1,4,1,1,1,1\r\n???##???.??#.?? 7,1\r\n.??#??#??.?.???? 8,3\r\n??#??????.????#? 7,1,1\r\n#??.?#.???.?????? 2,2,1,1,3\r\n.??.?.?.?#??? 1,5\r\n????.??#??##. 2,1,3,2\r\n???.??.?.???#???#.?? 1,1,1,1,8,1\r\n??##..???. 1,2,3\r\n..???#????? 1,4\r\n??.???????? 1,3,1\r\n??#.?##.???? 2,2,1\r\n.??#?##??.??#? 6,2\r\n.#??.#????#??#????? 1,9,2\r\n?#??#??????? 3,1,3,1\r\n??#?#??#????#.???. 10,1,1\r\n?????#?????##?? 1,3,7\r\n#???????.#???#???#?? 1,1,1,1,6,4\r\n.???###??## 1,3,3\r\n#?#?#?#??.?#####??. 1,1,3,8\r\n.???????????##? 1,5,3\r\n..?.?#?#?? 1,6\r\n#????#?..? 3,1,1\r\n????#??#?.??#???? 5,4\r\n????#.#?##??.??????? 4,5,1,2\r\n#???#?#??#??#..??#. 13,1\r\n.#???.##.?.??#??#?? 4,2,1,1,5\r\n??..?.????? 1,1,2\r\n??????????.?????#?? 10,3\r\n.??#??###??#??#?? 10,1,1\r\n.####.???.? 4,1,1\r\n?..?.###??.? 1,3,1\r\n???????..????????? 3,9\r\n?.??????????. 1,6\r\n.??.???#????? 2,1,3,1\r\n????#????#? 2,1,1\r\n???..??????? 1,3,1\r\n..???????.##?. 5,2\r\n?#??###??# 1,3,1\r\n???#..#??????? 1,1,3\r\n.???#??.?#.???????# 3,1,1,2,1,1\r\n?...#.??.?#?? 1,3\r\n???#?#???.#??. 1,3,1,2\r\n.????????????.??.. 7,1\r\n?.????????.#?.??#. 1,4,1,1,3\r\n??#?###.?..##?#?.? 5,5\r\n?#.?.?#?.?#?????. 2,2,6\r\n??##?#???.?#?#?????? 6,1,1,1,2\r\n??????.??? 1,1,1\r\n.?#???##??#??? 6,2\r\n??#????.??#???. 6,3\r\n?????????#??.? 2,5\r\n??##?????????? 2,1,1,1\r\n?????.?#??.# 3,2,1\r\n??#?#????.?? 5,1\r\n????.?#?#?#????#?.? 4,1,1,6,1\r\n.?????.???#. 1,1,2\r\n##????????#.????? 2,3,1,1,1\r\n#.??#???####.? 1,10\r\n??#???#.??????? 4,1,2,1,1\r\n?#?#??#.?#.?? 6,1,2\r\n??##??#????.??? 7,1\r\n?#?????#?#??#??? 2,7,1\r\n?????.????. 2,1\r\n?#???#??#.. 2,3,1\r\n.??##??????.. 5,2\r\n.??###??#??? 5,1\r\n??????####??##???? 3,11\r\n?.#?#?#?#??? 1,5\r\n?#??#..??????#### 5,1,1,1,4\r\n.??#..##?#??.#.#?? 1,1,4,1,1,3\r\n?????##??##?##?? 7,5\r\n.??.?#???...???#???. 1,5,4\r\n?#?#.??????.. 3,4\r\n??????.??. 2,2\r\n#..?????????#???? 1,1,1,4,1\r\n???????#???????# 9,2\r\n.#?.???#?#?? 2,1,2\r\n?##?#????##??? 3,1,1,5\r\n#??????#?.?#?.?? 1,2,4,3,1\r\n.?????##??#????# 1,7,1\r\n?????#?#??? 7,2\r\n#??????##?.#???. 5,2,2\r\n????##???#??##?.??? 14,2\r\n???.?.?????? 1,1,1,1\r\n?..?#.???????????? 1,2,9,2\r\n?????????.?#???.# 8,3,1,1\r\n.???#??.????.##??? 1,3,1,1,3\r\n??.?#??#????##.? 5,2\r\n??????.?????#??? 5,1,5\r\n?.?????..??#??..?. 5,3\r\n?.????????? 1,6,1\r\n???#?.?????. 1,2,5\r\n.##.#?##?#??????? 2,8,1\r\n??#?.????? 4,1,1\r\n?#????##.#.#??? 3,3,1,1,1\r\n??.?#.?????.. 2,4\r\n???#.??##. 2,2\r\n?????????? 5,1\r\n#????##?.? 1,4,1\r\n?#?###???.?.?. 1,6,1\r\n???####?#.?..?.#. 8,1,1\r\n??????????.?????#? 1,1,3,1,1,1\r\n????#?#?.?#??..## 7,1,1,2\r\n???.???#???# 1,5\r\n??.??????#?##??? 1,7,2,1\r\n#?.#???##??##?.?.? 2,2,7,1\r\n???????.????????. 1,1,2,7\r\n??#.?.??##? 2,1,4\r\n?#..????..? 2,1,1\r\n????#?#####???#??? 12,2,1\r\n#?#?#?#?#???????# 10,1,3\r\n??#.#?????.????????? 1,2,1,7\r\n????.?.#???.??? 1,4,1\r\n?????##??#?##... 1,8\r\n.##??????????? 3,2,1,1\r\n.#??.??#??.##?#? 3,3,5\r\n???#????.????? 7,2\r\n?.?.??????.??. 1,1,1,2\r\n..???????##????#??? 1,7,4\r\n???????#?.?#?#??.# 2,3,1,5,1\r\n???????#???# 4,2,2\r\n#????.??#?????#?. 1,3,1,2,1\r\n??.??.#??##. 1,5\r\n#??#?..##?#? 1,1,5\r\n???...????#????##??? 2,2,4,5\r\n#??#????.?.?????.#? 7,1,2,1,1\r\n??.?.?#??##???#?##?? 1,1,2,12\r\n?#?..??????#??#???? 2,6,4\r\n??.?????????#?.? 1,6,1,2\r\n?????#???#?#?##.??#. 12,2\r\n.####???#.???# 5,2,1,1\r\n???.????#? 1,2,2\r\n??##???#.? 4,2\r\n???..?#??#? 2,5\r\n##??#??#??#???? 2,5,2,1\r\n#?????.??#? 6,3\r\n??.????#???##? 2,6,2\r\n?????????##????##??? 1,3,11\r\n??????.???. 3,2\r\n.?.#.?????????????? 1,1,1,1,1,4\r\n.????.???#????#????. 3,8\r\n.??????????.#.#??? 9,1,4\r\n?#..?.?##???##?.# 1,1,9,1\r\n???#??#????.?# 3,1,2,1\r\n??.?.????? 1,1,2\r\n?.???#?..?? 1,2,2\r\n.?##?#???.?? 5,1,1\r\n??..?#?.???#??## 2,8\r\n.#??.#???.#?#???..? 2,2,1,3,1,1\r\n???.??##???#???#? 2,2,7\r\n??????#???##????.?# 2,1,4,2,1\r\n?????..????#?? 5,1,2,1\r\n??###??#??.??? 5,4,1\r\n???##???.# 5,1,1\r\n.???.???#?.?? 1,4\r\n????#????.#?.??#? 3,2,2,3\r\n?..???#?#???? 1,1,3,2\r\n?##?#?.?..? 3,2,1\r\n?..#?..?.?.##??? 1,1,1,5\r\n#??#?.#?...#? 1,2,1,2\r\n??...??..??.. 1,2,1\r\n?#?????#????#?#????? 1,1,1,1,1,7\r\n?.??#????#?# 1,1,1,5\r\n????????.?. 2,2,1\r\n?.???#?????#.#??? 1,10,1,1\r\n????..?.?.#????????? 3,1,1,4,4\r\n?#???.?.?#????.#???. 5,1,2,1,1,4\r\n??#???..?#??????? 1,1,5\r\n?#??#?????????? 1,3,7\r\n?#????...##?#?# 5,4,1\r\n.??.?..??##?????? 1,1,4,2,1\r\n#????#??.???#.##.? 8,1,1,2,1\r\n???#??.???####??? 1,3,7,1\r\n.????#?#.?#### 2,4,5\r\n?.#??.???#???#??##. 2,10\r\n???????????##. 9,2\r\n.??#?#?????#?? 5,5\r\n.?#???#??#?? 3,4\r\n???..?????..??? 1,1,1,2,3\r\n.##???#??????#?##? 7,5\r\n?#??####?#??????? 9,3\r\n??#?.??.?.####? 1,1,1,4\r\n#?##?#??.#?#???# 1,6,1,1,2\r\n.#?????#??#??? 2,1,6,1\r\n?.#.???#??? 1,1,1\r\n??#??#??#?.?? 3,1,1,1\r\n#???.#???#??##??#. 4,2,1,4,1\r\n?.??#?#??? 5,1\r\n???.?####?.???.????? 6,3\r\n???.##??#?? 1,2,1\r\n.???#??.#???##???.? 3,8\r\n.######???????? 6,3,1,1\r\n?.?#?.???..? 3,2,1\r\n??????#????#??????.# 14,1,1\r\n??.?#?##????.#.??#?? 1,1,2,2,1,4\r\n#?#?????#?#??#?.??. 1,2,8,1\r\n?#??.#???#??.##?.? 4,1,4,2,1\r\n?#??#????#??###??? 6,8\r\n??????#?#? 1,7\r\n????#?.?.???? 5,1,1,2\r\n???..?#?#?? 1,4\r\n??#?##?...?. 1,3\r\n#??.?#????### 1,1,4\r\n.#?##???.?#?? 4,1,1\r\n??.#.?????#???#??. 2,1,1,5,1,1\r\n?????.???. 1,1,3\r\n.?.???#???#.???#. 7,3\r\n???????#??????.???? 1,1,3,4,1\r\n#???...???###????##? 1,2,7,4\r\n?#???#???#??#?#?..# 6,1,1,1,1,1\r\n?????##?#?#??.#??? 10,2,1\r\n?????####?#??#??. 11,1,1\r\n?.???##??????.? 1,7,2,1\r\n#?.?????#??.??????.. 1,4,3\r\n??#???#??????#??.? 2,10\r\n??#??.????.. 2,2\r\n????#??..?? 1,4,1\r\n????????#?? 1,7\r\n??#?.??????.?.???? 1,1,4,1,3\r\n?.??#..??. 1,1,2\r\n?#.???????#?????.?.? 1,9\r\n?.?????????#.???? 10,1,1\r\n?#???#?????????????. 7,5\r\n?????#?.???.??#?. 2,1,1,2,4\r\n..?...??#.?#?#.###? 1,3,1,1,4\r\n??#.?##.??????. 2,3,1,1,1\r\n????.?#??#???# 1,1,9\r\n??#???###?#????# 8,6\r\n?##?#?#???#????. 3,5,4\r\n?#?#?????#??????#.?# 4,5,1,2,1,1\r\n..??#????#?? 1,1,1,1\r\n????#?#?#.#?? 2,1,3,3\r\n?????##???#???#. 6,6\r\n?.#...???##.????? 1,2\r\n?????....?# 1,1\r\n????????###??????#? 1,2,8,1,1\r\n?###?????#..????? 9,3\r\n????.??????.?. 1,2,2,1\r\n.??????#?????.?#?? 1,4,3,2\r\n..???????. 1,2\r\n??.??????? 1,1,1\r\n????????.?.??? 2,2,1,1\r\n?????????.? 6,1,1\r\n??#????##?#??#??#? 3,1,10\r\n?.??..#??????#?.? 1,2,8,1\r\n?.????..#?.. 2,2\r\n??.??????#??#????? 1,1,1,1,7,1\r\n????????#?.#?#?.# 8,1,1,1\r\n#.#?.#.??##?????? 1,2,1,7,1\r\n???????.???. 1,2,1,1\r\n.#???###???.?#. 3,5,1\r\n?????????#?? 1,1,5,1\r\n???????##???? 1,7\r\n??????.??#?# 3,1,2,1\r\n#???.?#???#? 3,4,1\r\n?????????#? 4,1,1\r\n...##?###?.?..?? 7,1\r\n??.?#??#?????????? 1,2,1,5,2\r\n????#???#?????? 2,1,6,1\r\n??#?.???????? 4,1,1,1\r\n###?????????#?.#?#?? 5,5,1,1,1,1\r\n??.??##?.?. 1,4\r\n????.????#???????? 1,3\r\n.?#??##??.??????#??. 8,8\r\n?..??#??#?.??. 5,1\r\n.#?#?????# 4,1,1\r\n?#??#..?#????? 1,1,4,2\r\n#??#.??????# 2,1,6\r\n??????..????.. 4,3\r\n.##????????#??#? 2,1,1,6\r\n.???.???##? 2,4\r\n?.??#?????#??. 1,5\r\n???#?.?##?? 2,3\r\n?#...?.#..?#?#?#?#?? 1,1,6,3\r\n???????###?? 2,5\r\n#?#.??#.#?.?#?? 1,1,2,1,3\r\n#???.?.?##. 3,1,3\r\n#?.??###??. 1,6\r\n..?????????.??# 4,1,1,1\r\n??.?????#??? 1,1,2\r\n??.?#???????? 1,5,1\r\n??.?.????????#?##? 1,1,2,8\r\n?###??.??. 6,1\r\n.?.#???#.? 1,1,1\r\n????????#?. 3,3\r\n#.###??#?#????? 1,8,1,1\r\n???????.#?#????.? 1,5\r\n??#????..??#??#?.# 1,1,1,1,4,1\r\n#??#??????????? 1,5,1,1,2\r\n??##.?#???#??? 2,5\r\n#.????#.??.? 1,1,1,1\r\n????###????. 6,1\r\n.#?###?#.?#??? 7,1,1\r\n??????.??.#????. 3,1\r\n?#???##??#.#?..? 9,1\r\n???????#?#? 3,4\r\n?#?????##?.?#?#???.? 2,6,7\r\n???#?.###??#?. 5,6\r\n???#?.##??#?#? 1,3,1,2\r\n???????#???#??????. 2,8,1,1,1\r\n.#?.??#..? 1,3\r\n????????..??? 2,3\r\n????#????.?# 5,1,2\r\n?##????.?.?. 5,1\r\n###?#?????#???#??.# 5,2,7,1\r\n??#?#..???? 3,3\r\n.??.??????.#?? 2,2,2\r\n.??.?#.??#???????? 2,1,1,1,1,1\r\n???#??##???..?? 1,9,2\r\n...#???.##?.?? 1,2\r\n#??.??.?..?#?? 3,1,1,1\r\n???#????.????#??. 2,2,2,3\r\n?.???.???..???#.? 1,1,4\r\n?.??#?#?#?.#??#??#? 8,7\r\n?#..????#? 1,2,2\r\n?#.#.#????????###? 1,1,1,10\r\n.????????? 5,2\r\n????#?#.??.??# 7,1,1,1\r\n?????##??????.???.# 1,1,6,1,3,1\r\n???.????#.? 1,5\r\n??#????#?#? 6,2\r\n.#.?##?#?? 1,2,1\r\n.?????#??#???.#? 3,3,4,1\r\n.#.????#?.??? 1,6,2\r\n????#??#??#?#? 1,2,7\r\n?#????.#?#??#??#? 2,2,3,6\r\n??#??#?.??????. 7,2\r\n##?.???.##???##?# 2,3,7,1\r\n??????##?#.????? 8,1\r\n..#?#??????#??#?. 1,1,9\r\n?#????.#.????????#?# 1,1,1,1,9\r\n????#???#?.??##? 3,6,4\r\n.???.#?#.??##?#?? 2,3,6\r\n??.?#??.#???.?.?#?#? 2,2,1,2,1,4\r\n##???#???.?#??.?#??? 6,2,1,1\r\n##?#???.??#????? 5,1,3,2\r\n?#?????????#??.?.?? 1,3,5,1,1,2\r\n.????.?##.#?#.#. 1,3,1,1,1\r\n?????###?#?????? 8,2,2\r\n?.?#????#???#???. 1,2,1,1,5\r\n???.??????.??.?#??#? 1,5,1,5\r\n???#??#??#??? 6,3,1\r\n???#??.??#.?.?.. 3,1,1,1,1\r\n?#?#?????.. 5,1\r\n???.???##???#?? 1,2,3,1\r\n#???????#? 3,1,3\r\n?##?.?.?.???? 3,1,1,2\r\n????????..??#??? 1,1,6\r\n??????#?.#.? 4,1,1\r\n.?#?##?##?#.???# 10,2,1\r\n???#?#??.? 1,3\r\n??##????????.?? 1,7,1,1\r\n?#??.###?? 2,3\r\n...?#?????.?? 5,1\r\n????.??.??#? 2,2,2\r\n???#?????????? 1,2,6,1\r\n????#??.??.???## 5,2,4\r\n##.??#???...#???#?? 2,1,2,7\r\n?..??.?.#???? 1,1,2,1\r\n?#?##????##?#? 1,3,4,2\r\n????#?##???#?.? 3,8,1\r\n?.??.##??.? 1,2,1\r\n??#?????#??#?..?##?? 4,6,3\r\n??##??..???.# 6,1,1,1\r\n?????#???##?????.?# 6,7,1\r\n.??.???.??.??#???. 1,3,2,4\r\n...???????#.???##?? 1,6,7\r\n??.#.????. 1,4\r\n????????#.?.?????? 8,1,3,1\r\n??.???.##?##??#??? 1,8\r\n???.???.?#???## 1,1,1,1,6\r\n.#????#????? 1,4,1,1\r\n???#??#.?.#????.. 1,1,1,1,5\r\n???#.?.#???#? 4,5\r\n?#?#?##???.#. 1,1,4,1\r\n??????.??..#??#??#? 5,1,8\r\n??#?#?##??#??#? 1,1,1,5,1\r\n??#??????#??? 1,1,4,1\r\n?????.???##.??.?## 3,1,2,2,1,3\r\n?###????.????#???. 4,8\r\n??#?##?.##?#???##??? 1,1,2,6,4\r\n???#????????.? 6,1,2\r\n#.?#.?????.??#? 1,2,4,1,1\r\n???#???#??.???#?#??# 5,2,3,4\r\n???#??.???? 1,2,1\r\n???????.?..????. 3,3,1\r\n????##?#.?.?.?????#? 6,6\r\n???.##???.??#? 1,1,5,2\r\n?????##?##??..????. 1,9,4\r\n??#.#?#???.??? 1,1,3,1\r\n???#??##????#?#. 1,7,4\r\n#?#?#?..??. 3,2,2\r\n.?#.??.#??????.#??? 2,1,2,1,2,1\r\n#??#????#? 5,2\r\n?????.??.#??. 3,1\r\n??.??.####?#?? 2,4,3\r\n?#?.?????#?#???.??# 1,8,3\r\n####???#??#?.#?? 11,1\r\n????.####.? 1,4\r\n????#??.#..??????#? 5,1,1,8\r\n????????#??#.? 1,6,1,1\r\n??#?#????#?.???? 2,7,1,1\r\n.????.?????? 1,1,4\r\n??.????#?#?..?#.? 1,1,4,2,1\r\n.??????#????????? 3,1,2,2,1\r\n.?#?#?##??.#.???# 7,1,2,1\r\n#???#???#???.#?? 5,3,1,1,1";
    const char DAMAGED_SYMBOL = '#';
    const char OPERATIONAL_SYMBOL = '.';
    const char UNKNOWN_SYMBOL = '?';

    private async void Awake()
    {
        //Debug.Log("Day 12 part 1: " + await ExecutePart1(_input));
        Debug.Log("Day 12 part 2: " + ExecutePart2(_input));
    }

    public static async Task<long> ExecutePart1(string input)
    {
        string[] inputLines = Common.SplitLines(input);

        long sum = 0;
        foreach (string line in inputLines)
        {
            Debug.Log($"Parsing line {line}");
            sum += ParseLine(line, unfold: false);
            await Task.Yield();
        }

        return sum;
    }

    public static async Task<long> ExecutePart2(string input)
    {
        string[] inputLines = Common.SplitLines(input);

        long sum = 0;
        foreach (string line in inputLines)
        {
            Debug.Log($"Parsing line {line}");
            sum += ParseLine(line, unfold: true);
            await Task.Yield();
        }

        return sum;
    }

    public static long ParseLine(string line, bool unfold)
    {
        string[] splitLine = line.Split(' ');
        string sequence = splitLine[0];
        int[] verification = splitLine[1].Split(',').Select(s => int.Parse(s)).ToArray();

        if (unfold)
        {
            string unfoldedSequence = sequence + sequence + sequence + sequence + sequence;
            int[] unfoldedVerification = new int[verification.Length * 5];
            for (int i = 0; i < unfoldedVerification.Length; i++)
            {
                unfoldedVerification[i] = verification[i % 5];
            }

            sequence = unfoldedSequence;
            verification = unfoldedVerification;
        }

        int validSequences = 0;

        foreach (string possibleSequence in GetPossibleSequences(sequence))
        {
            if (IsValidSequence(possibleSequence, verification))
                validSequences++;
        }

        return validSequences;
    }

    public static string[] GetPossibleSequences(string inputSequence)
    {
        Stack<string> sequencesToTest = new Stack<string>();
        sequencesToTest.Push(inputSequence);

        List<string> possibleSequences = new List<string>();

        while (sequencesToTest.Count > 0)
        {
            string currentSequence = sequencesToTest.Pop();
            bool anyUnknowns = false;

            for (int i = 0; i < currentSequence.Length; i++)
            {
                if (currentSequence[i] == UNKNOWN_SYMBOL)
                {
                    StringBuilder damagedSequence = new StringBuilder(currentSequence);
                    StringBuilder operationalSequence = new StringBuilder(currentSequence);

                    damagedSequence[i] = DAMAGED_SYMBOL;
                    operationalSequence[i] = OPERATIONAL_SYMBOL;

                    sequencesToTest.Push(damagedSequence.ToString());
                    sequencesToTest.Push(operationalSequence.ToString());

                    anyUnknowns = true;
                    break;
                }
            }

            if (!anyUnknowns)
            {
                possibleSequences.Add(currentSequence);
            }
        }

        return possibleSequences.ToArray();
    }

    public static bool IsValidSequence(string sequence, int[] verification)
    {
        int currentVerification = 0;
        int damagedCount = 0;
        foreach (char c in sequence) 
        {
            if (c == DAMAGED_SYMBOL)
            {
                damagedCount++;
            }
            else if (damagedCount > 0)
            {
                if (currentVerification == verification.Length)
                {
                    return false;
                }

                if (damagedCount != verification[currentVerification])
                {
                    return false;
                }
                else
                {
                    currentVerification++;
                    damagedCount = 0;

                }
            }
        }

        if (currentVerification < verification.Length - 1)
            return false;

        if (currentVerification < verification.Length && damagedCount != verification[currentVerification])
            return false;

        if (currentVerification == verification.Length && sequence[^1] == DAMAGED_SYMBOL)
            return false;

        return true;
    }
}
